{"version":3,"sources":["components/Login/Login.module.css","components/UI/Input/Input.module.css","components/UI/Card/Card.module.css","components/UI/Button/Button.module.css","components/Home/Home.module.css","components/MainHeader/Navigation.module.css","components/MainHeader/MainHeader.module.css","store/auth-context.js","components/UI/Card/Card.js","components/UI/Button/Button.js","components/UI/Input/Input.js","components/Login/Login.js","components/Home/Home.js","components/MainHeader/Navigation.js","components/MainHeader/MainHeader.js","App.js","index.js"],"names":["module","exports","login","actions","control","invalid","card","button","home","nav","main-header","AuthContext","React","createContext","isLoggedIn","onLogin","email","password","onLogout","dummydatabase","dummy@account.xyz","AuthContextProvider","props","_useState","useState","_useState2","Object","slicedToArray","setIsLoggedIn","_useState3","database","useEffect","userIsLogged","localStorage","getItem","react_default","a","createElement","Provider","value","setItem","window","alert","removeItem","children","Card","className","concat","classes","Button","type","onClick","disabled","Input","forwardRef","ref","inputRef","useRef","activate","current","focus","useImperativeHandle","isValid","htmlFor","label","id","onChange","onBlur","emailReducer","state","action","val","includes","passwordReducer","trim","length","Login","ctx","useContext","_ref","emailRef","passwordRef","formIsValid","setFormIsValid","_useReducer","useReducer","undefined","_useReducer2","emailState","dispatchEmail","_useReducer3","_useReducer4","passwordState","dispatchPassword","emailIsValid","passwordIsValid","checkLogin","setTimeout","console","log","clearTimeout","UI_Card_Card","onSubmit","event","preventDefault","Input_Input","target","UI_Button_Button","btn","Home","Navigation","href","MainHeader","isAuthenticated","App","Fragment","components_MainHeader_MainHeader","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.3cd419cd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"login\":\"Login_login__37FS8\",\"actions\":\"Login_actions__1-1F4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"control\":\"Input_control__1NWot\",\"invalid\":\"Input_invalid__N-_JP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__2-gUl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__31m_C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"Home_home__3Q_IV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navigation_nav__Mkeyz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main-header\":\"MainHeader_main-header__3v4UE\"};","import React, { useState, useEffect } from 'react';\n\nexport const AuthContext = React.createContext({\n    isLoggedIn: false,\n    onLogin: (email, password) => {},\n    onLogout: () => {},\n});\n\n// Dummy account\nconst dummydatabase = { 'dummy@account.xyz': '1234567890' };\n\nexport default function AuthContextProvider(props) {\n    // Log state\n    const [isLoggedIn, setIsLoggedIn] = useState(false),\n        [database] = useState(dummydatabase);\n\n    // Local storage checker\n    useEffect(() => {\n        const userIsLogged = localStorage.getItem('isLoggedIn');\n        setIsLoggedIn(userIsLogged === '1' ? true : false);\n    }, []);\n\n    // Log handler\n    const loginHandler = (email, password) => {\n            // Check that password and email match\n            if (database[email] === password) {\n                // Set a login storage persistent value\n                localStorage.setItem('isLoggedIn', '1');\n                setIsLoggedIn(true);\n            } else {\n                window.alert('Wrong password');\n            }\n        },\n        logoutHandler = () => {\n            // Clears storage for logout\n            localStorage.removeItem('isLoggedIn');\n            setIsLoggedIn(false);\n        };\n\n    return (\n        <AuthContext.Provider\n            value={{\n                isLoggedIn: isLoggedIn,\n                onLogin: loginHandler,\n                onLogout: logoutHandler,\n            }}\n        >\n            {props.children}\n        </AuthContext.Provider>\n    );\n}\n","import React from 'react';\n\nimport classes from './Card.module.css';\n\nconst Card = (props) => {\n  return (\n    <div className={`${classes.card} ${props.className}`}>{props.children}</div>\n  );\n};\n\nexport default Card;\n","import React from 'react';\n\nimport classes from './Button.module.css';\n\nconst Button = (props) => {\n  return (\n    <button\n      type={props.type || 'button'}\n      className={`${classes.button} ${props.className}`}\n      onClick={props.onClick}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </button>\n  );\n};\n\nexport default Button;\n","import classes from './Input.module.css';\nimport React, { useRef, useImperativeHandle } from 'react';\n\n// This component is wrapped as a ref\nconst Input = React.forwardRef((props, ref) => {\n    const inputRef = useRef(),\n        activate = () => {\n            // Focus comes from Vanilla JS\n            inputRef.current.focus();\n        };\n    useImperativeHandle(ref, () => {\n        return { focus: activate };\n    });\n    return (\n        <div\n            className={`${classes.control} ${\n                props.isValid === false ? classes.invalid : ''\n            }`}\n        >\n            <label htmlFor={props.htmlFor}>{props.label}</label>\n            <input\n                ref={inputRef}\n                type={props.type}\n                id={props.id}\n                value={props.value}\n                onChange={props.onChange}\n                onBlur={props.onBlur}\n            />\n        </div>\n    );\n});\n\nexport default Input;\n","import React, {\n    useState,\n    useEffect,\n    useRef,\n    useReducer,\n    useContext,\n} from 'react';\nimport classes from './Login.module.css';\nimport { AuthContext } from '../../store/auth-context';\nimport Card from '../UI/Card/Card';\nimport Button from '../UI/Button/Button';\nimport Input from '../UI/Input/Input';\n\n// Reducer functions\nconst emailReducer = (state, action) => {\n        // Checks the values from the dispatchFunction\n        if (action.type === 'USER_INPUT') {\n            return {\n                value: action.val,\n                isValid: action.val.includes('@'),\n            };\n        } else if (action.type === 'INPUT_BLUR') {\n            // Checks if the user stops writing\n            // Using the state snapshot to access the last state values\n            return {\n                value: state.value,\n                isValid: state.value.includes('@'),\n            };\n        }\n        // Otherwise returns the initial state\n        return { value: '', isValid: false };\n    },\n    passwordReducer = (state, action) => {\n        if (action.type === 'USER_INPUT') {\n            return {\n                value: action.val,\n                isValid: action.val.trim().length > 6,\n            };\n        } else if (action.type === 'INPUT_BLUR') {\n            return {\n                value: state.value,\n                isValid: state.value.trim().length > 6,\n            };\n        }\n        // Otherwise returns the initial state\n        return { value: '', isValid: false };\n    };\n\nexport default function Login() {\n    const ctx = useContext(AuthContext),\n        [emailRef, passwordRef] = [useRef(), useRef()],\n        [formIsValid, setFormIsValid] = useState(false),\n        [emailState, dispatchEmail] = useReducer(emailReducer, {\n            value: '',\n            isValid: undefined,\n        }),\n        [passwordState, dispatchPassword] = useReducer(passwordReducer, {\n            value: '',\n            isValid: undefined,\n        });\n    // Destructuring for better performance\n    const { isValid: emailIsValid } = emailState,\n        { isValid: passwordIsValid } = passwordState;\n\n    useEffect(() => {\n        const checkLogin = setTimeout(() => {\n            setFormIsValid(emailIsValid && passwordIsValid);\n        }, 500);\n        return () => {\n            console.log('Cleanup function');\n            clearTimeout(checkLogin);\n        };\n    }, [emailIsValid, passwordIsValid]);\n    // The object properties were passed as dependencies otherwise\n    // the effect will be triggered with every change in the object\n\n    // Input managers and validators\n    const emailChangeHandler = event => {\n            // We pass a val field in the dispatch function\n            dispatchEmail({\n                type: 'USER_INPUT',\n                val: event.target.value,\n            });\n        },\n        passwordChangeHandler = event => {\n            dispatchPassword({\n                type: 'USER_INPUT',\n                val: event.target.value,\n            });\n        },\n        validateEmailHandler = () => {\n            dispatchEmail({ type: 'INPUT_BLUR' });\n        },\n        validatePasswordHandler = () => {\n            dispatchPassword({ type: 'INPUT_BLUR' });\n        };\n\n    // Submision\n    const submitHandler = event => {\n        event.preventDefault();\n        if (formIsValid) {\n            ctx.onLogin(emailState.value, passwordState.value);\n        } else if (!formIsValid) {\n            emailRef.current.focus();\n        } else {\n            passwordRef.current.focus();\n        }\n    };\n\n    return (\n        <Card className={classes.login}>\n            <form onSubmit={submitHandler}>\n                <Input\n                    ref={emailRef}\n                    htmlFor='email'\n                    label='E-Mail'\n                    type='email'\n                    id='email'\n                    value={emailState.value}\n                    onChange={emailChangeHandler}\n                    onBlur={validateEmailHandler}\n                    isValid={emailIsValid}\n                />\n                <Input\n                    ref={passwordRef}\n                    htmlFor='password'\n                    label='Password'\n                    type='password'\n                    id='password'\n                    value={passwordState.value}\n                    onChange={passwordChangeHandler}\n                    onBlur={validatePasswordHandler}\n                    isValid={passwordIsValid}\n                />\n                <div className={classes.actions}>\n                    <Button type='submit' className={classes.btn}>\n                        Login\n                    </Button>\n                </div>\n            </form>\n        </Card>\n    );\n}\n","import React from 'react';\nimport Card from '../UI/Card/Card';\nimport classes from './Home.module.css';\n\nexport default function Home() {\n    return (\n        <Card className={classes.home}>\n            <h1>Welcome back!</h1>\n        </Card>\n    );\n}\n","import React, { useContext } from 'react';\nimport classes from './Navigation.module.css';\nimport { AuthContext } from '../../store/auth-context';\n\nexport default function Navigation() {\n    const ctx = useContext(AuthContext);\n    return (\n        <nav className={classes.nav}>\n            <ul>\n                {ctx.isLoggedIn && (\n                    <li>\n                        <a href='/'>Users</a>\n                    </li>\n                )}\n                {ctx.isLoggedIn && (\n                    <li>\n                        <a href='/'>Admin</a>\n                    </li>\n                )}\n                {ctx.isLoggedIn && (\n                    <li>\n                        <button onClick={ctx.onLogout}>Logout</button>\n                    </li>\n                )}\n            </ul>\n        </nav>\n    );\n}\n","import React from 'react';\n\nimport Navigation from './Navigation';\nimport classes from './MainHeader.module.css';\n\nconst MainHeader = (props) => {\n  return (\n    <header className={classes['main-header']}>\n      <h1>A Typical Page</h1>\n      <Navigation isLoggedIn={props.isAuthenticated} onLogout={props.onLogout} />\n    </header>\n  );\n};\n\nexport default MainHeader;\n","import React, { useContext } from 'react';\n// Components\nimport Login from './components/Login/Login';\nimport Home from './components/Home/Home';\nimport MainHeader from './components/MainHeader/MainHeader';\n// Context components\nimport { AuthContext } from './store/auth-context';\n\nexport default function App() {\n    const ctx = useContext(AuthContext);\n\n    return (\n        <>\n            <MainHeader />\n            <main>\n                {!ctx.isLoggedIn && <Login />}\n                {ctx.isLoggedIn && <Home />}\n            </main>\n        </>\n    );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport AuthContextProvider from './store/auth-context';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n    <React.StrictMode>\n        <AuthContextProvider>\n            <App />\n        </AuthContextProvider>\n    </React.StrictMode>\n);\n"],"sourceRoot":""}